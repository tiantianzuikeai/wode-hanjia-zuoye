<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>
	</head>
	<style type="text/css">
	#main{position: absolute;}
		.pic{padding: 15px 0 0 15px;float:left;}
		.pic img{width: 230px;height: auto;}
		.box{ padding: 10px;border:1px solid #ccc; box-shadow: 0 0 6px #ccc;border-radius: 5px;}
	</style>

	<body>
		<div id="main">
			<div class="pic">
				<div class="box"><img src="img/1.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/2.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/3.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/4.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/5.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/6.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/7.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/8.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/9.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/10.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/11.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/12.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/13.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/14.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/15.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/16.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/17.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/18.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/19.jpg"/></div>
			</div>
			<div class="pic">
				<div class="box"><img src="img/20.jpg"/></div>
			</div>

		</div>
	</body>
<script type="text/javascript" src="js/jquery-1.8.3.min.js" /></script>
<script type="text/javascript">
	$(window).on('load',function(){
		waterfall();
	})
	
	   
	function waterfall(){
		var $boxs=$('#main>div');
		var w=$boxs.eq(0).outerWidth();
		var cols=Math.floor($(window).width()/w);
	    $('#main').width(w*cols).css('margin','0 auto')
		
		var hArr=[];
		$boxs.each(function(index,value){
			var h=$boxs.eq(index).outerHeight();
			if(index<cols){
				hArr[index]=h
			}else{
					var minH=Math.min.apply(null,hArr);
					var minHIndex=$.inArray(minH,hArr);
					$(value).css({
						'position':'absolute','top':minH+'px','left':minHIndex*w+'px'
					})
					hArr[minHIndex]+=$boxs.eq(index).outerHeight()
			}
		})
	}
</script>
</html>